<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>New Page</title>
<object th:include="/fragments/header :: cms-head" th:remove="tag" />
<script type="text/javascript" th:inline="javascript">
var templets= null;
var myIndex = 0;
var images = [];
	$(document).ready(function() {
			
$('.tab').click(function(){
		    var ativetab = $(this).attr('id');
		    if(ativetab == 'tab2'){
		    	var html = document.getElementById('body-content').innerHTML;
		    	var jHtmlObject = jQuery(html);
		    	var editor = jQuery("<p>").append(jHtmlObject);
		    	editor.find("#lsb-add-container,#rsb-add-container").remove();
		    	editor.find(".addremoveDiv").remove();
		    	editor.find("#leftside,#rightside").removeClass("templet_style");
		    	editor.find("[id^=container]").css("border","none");
		    	editor.find("#leftside,#rightside").css("border","none");
		    	
		    	var newHtml = editor.html();
		        $("#preview-body-content").html(newHtml);
		        
		     	document.getElementById('templetcontent').value = newHtml;
		    } 
		});
		
		 templets = [[${templets}]];
		 var obj=document.getElementById("bodyrow-select");         
          for (var i = 0; i <= templets.length; i++){
             opt = document.createElement("option");
             opt.value = templets[i].id;
             opt.text=templets[i].templetName;
             obj.appendChild(opt);
           }
	});
	
	function getval(sel) {
		
		var html = templets[sel.value].templetContent;
		html = html.replace(/Remove/g, "Add Content");
		html = html.replace(/removeDrawedContainer/g, "changeContentModelButtonId");
		
    	var jHtmlObject = jQuery(html);
    	var editor = jQuery("<p>").append(jHtmlObject);
    	editor.find("#lsb-add-container,#rsb-add-container").remove();
    	
    	var newHtml = editor.html();
        $("#body-content").html(newHtml);
        
        carousel();  	
	}
	
	function addcontainer(id) {
		if (id == 'lsb-add-container') {
			$("#lsb_container").css("display", "block");
		} else if (id == 'rsb-add-container') {
			$("#rsb_container").css("display", "block");
		}
		
		$(".addbtn-model").attr("id", id)
		$('#myModal').modal('show');
	}
	
	function showcontainer(id) {

		var ele = $('#' + id).parent().attr('id');
		var mainDiv = document.getElementById(ele);
		var x = mainDiv.getElementsByTagName('div')[0].id;
		
		var iDiv = document.createElement('div');
		iDiv.id = 'container' + count;
		iDiv.className = 'subdivs';

		var jDiv = document.createElement('div');
		jDiv.className = 'addremoveDiv';
     	jDiv.innerHTML = "<button id='container"+ count+ "' type='button' class='btn btn-info btn-sm' onclick='removeDrawedContainer(this.id);return false'>Remove</button>";
		iDiv.appendChild(jDiv);

		var cDiv = document.createElement('div');
		cDiv.id = 'content';
		cDiv.className = 'content';

		var hTag = document.createElement('h5');
		hTag.innerHTML = "Sometimes there might be a group of elements that you want to stylize in a certain way. For example, let's say you're creating an entertainment web page that includes several movie reviews, in addition to other content. The entire content of each review (a heading with the movie title, plus several paragraphs) is wrapped in a <div> in order to keep it all together in one box. The first paragraph of each review is a short summary describing the movie, then all remaining paragraphs contain the content of your critique of the movie. You may want to stylize the";
		cDiv.appendChild(hTag);
		iDiv.appendChild(cDiv);

		var container = document.getElementById(x);
		container.appendChild(iDiv);

		count++;
	}
</script>

<script type="text/javascript">
	 function carousel() {
	    	var i;
	 		var x = document.getElementsByClassName("mySlides");
		for (i = 0; i < x.length; i++) {
			x[i].style.display = "none";
		}
		myIndex++;
		if (myIndex > x.length) {
			myIndex = 1
		}
		x[myIndex - 1].style.display = "block";
		setTimeout(carousel, 2000); // Change image every 2 seconds 
	} 
</script>
</head>
<body>
	<div class="main-wrapper">
		<div class="app" id="app">
			<i th:replace="/fragments/component :: cms-header"></i>

			<div class="">
				<div id="loginbox">
					<div class="panel panel-info">
						<div class="panel-heading">
							<div class="panel-title">Create New Page</div>
							<div
								style="float: right; font-size: 80%; position: relative; top: -10px">
							</div>
						</div>
						<div id="exTab2" class="">
							<ul class="nav nav-tabs">
								<li class="active"><a href="#1" data-toggle="tab" class="tab" id="tab1"> Page</a></li>
								<li><a href="#2" data-toggle="tab" class="tab" id="tab2">Preview</a></li>
							</ul>

							<div class="tab-content ">
								<div class="tab-pane active" id="1">
								<aside class="sidebar" style="width: 25%;float: left;">
									<div style="" class="panel-body">

										<div style="display: none" id="login-alert"
											class="alert alert-danger col-sm-12"></div>

										<form id="templetform" method="POST"
											th:action="@{/admin/page/savenewpage}" data-parsley-validate
											class="form-horizontal">
                                            <input type="hidden" name="id" id="id" />
											<input type="hidden" id="templetcontent" name="templetContent">
											<DIV class="row" style="padding: 10px;">
											</DIV>
											<DIV class="row" style="padding: 10px;">
												<div class="col-sm-4">Name</div>
												<div class="col-sm-8">
													<div class="input-group">
														<input id="templet-name" type="text" class="form-control"
															name="pageName" placeholder="Page Name">
													</div>
												</div>
											</DIV>
											<DIV class="row" style="padding: 10px;">
												<div class="col-sm-4">URL</div>
												<div class="col-sm-8">
													<div class="input-group">
														<input id="URL" type="text" class="form-control"
															name="URL" placeholder="Page URL">
													</div>
												</div>
											</DIV>
											<DIV id="body-column-select_0">
												<div class="row" style="padding: 10px" id="bodyrow">
													<div class="col-sm-4">Templet</div>
													<div class="col-sm-8">
														<select class="selectpicker form-control" id="bodyrow-select"
															name="templet" onchange="getval(this);">
															
														</select>
													</div>
												</div>
											</DIV>
											<DIV class="form-group">
												<div class="col-md-4 control">
														<input type="submit" class="btn btn-success" value="Save"
															id="savepage" />
													</div>
												</DIV>
												</form>
											</div>
										</aside>
										<article style="width: 70%;float: left;">
										<div id="templettext">
											<form action="">
												<input type="hidden" id="selected-container" value="">
												<div id="preview">
													<div id="preview-header">
													<i th:replace="/fragments/header :: preview-header"></i>
												    </div>

													<div id="body-content" class="div_style templet_style"
														style="width: 100%">
														
													</div>
												
													<div id="preview-footer">
													 <i th:replace="/fragments/header :: preview-footer" ></i>
												</div>
												</div>
											</form>
										</div>
									</article>
									</div>
									
								<div class="tab-pane" id="2">
									 <div id="templettext">
										<form action="">
											<input type="hidden" id="selected-container" value="">
											<div id="preview" class="container">
												
												<div id="preview-header">
													<i th:replace="/fragments/header :: preview-header"></i>
												</div>
												
												<div id="preview-body-content" class="div_style templet_style"
														style="width: 100%">
												</div>
												<!-- <div id="preview-body-content" style="min-height: 400px;height: 70%">
													
												</div> -->
												
												<div id="preview-footer">
													 <i th:replace="/fragments/header :: preview-footer" ></i>
												</div>
											</div>
										</form>
									</div>
								</div>
								<div th:replace="/fragments/component :: myModal" />
									<div th:replace="/fragments/component :: contentModal" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	 <div th:replace="/fragments/component :: cms-footer" /> 
</body>
</html>